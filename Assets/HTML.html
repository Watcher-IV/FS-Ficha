<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Ficha Flagelo-Sombrio (Otimizada + LocalStorage)</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@700&family=Spectral:wght@300;400;600&family=VT323&display=swap" rel="stylesheet">

  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Botão de abrir biblioteca -->
  <button id="libraryToggle" style="position:absolute;top:10px;left:10px;z-index:1000;">☰</button>

  <!-- Menu da biblioteca -->
  <div class="library-menu" style="position:absolute;top:40px;left:10px;background:var(--panel-bg);padding:8px;border:1px solid var(--edge);display:none;z-index:1000;">
  <h4>Biblioteca</h4>
  <ul id="fichaList" style="list-style:none;padding:0;margin:0;"></ul>
  <button id="newFichaBtn" style="margin-top:6px;">+ Nova Ficha</button>
  </div>

  <div class="wrap">

    <!-- ESQUERDA -->
    <aside class="panel">
      <div class="portrait" id="portrait" style="--portrait-normal:url('');--portrait-injured:url('');--portrait-insane:url('')"></div>

      <div class="vitals">
        <div class="vital">
          <h4>PV</h4>
          <div class="bar-label"><span id="pvLabel">10/10</span></div>
          <input type="number" id="pvInput" value="10" min="0" />
          <div class="bar-wrap bar-pv" aria-hidden="true"><div id="pvBar" class="bar-fill"></div></div>
        </div>

        <div class="vital">
          <h4>PS</h4>
          <div class="bar-label"><span id="psLabel">50/100</span></div>
          <input type="number" id="psInput" value="50" min="0" />
          <div class="bar-wrap bar-ps" aria-hidden="true"><div id="psBar" class="bar-fill"></div></div>
        </div>

        <div class="vital">
          <h4>Tensão</h4>
          <div class="bar-label"><span id="tensionLabel">6/12</span></div>
          <input type="number" id="tensionInput" value="6" min="0" />
          <div class="bar-wrap bar-tension" aria-hidden="true"><div id="tensionBar" class="bar-fill"></div></div>
        </div>
      </div>

      <div class="effects">
        <div style="font-size:13px;color:var(--muted)">Efeitos (Buffs / Debuffs)</div>
        <textarea id="effectsField" placeholder="Escreva efeitos, buffs e debuffs livremente..."></textarea>
      </div>
    </aside>

    <!-- CENTRO -->
    <main class="center" id="centerPane">
      <div class="top-actions"><button id="saveBtn">Salvar ficha</button><button id="clearBtn">Limpar ficheiro</button></div>
      <div class="title">Ficha — Flagelo Sombrio</div>

      <div class="personal">
        <input id="nameField" placeholder="Nome" />
        <input id="originField" placeholder="Origem" />
        <input id="ageField" placeholder="Idade" />
        <input id="heightField" placeholder="Altura" />
        <input id="eyeField" placeholder="Cor dos olhos" />
        <div></div>
      </div>

      <label style="display:block;margin-bottom:8px;color:var(--muted)">Atributos (0 a 10)</label>
      <div class="attrs" id="attrs">
        <!-- cada .attr usa data-attr para simplificar eventos -->
        <div class="attr" data-attr="FOR"><h5>FOR — Poder Físico</h5><div class="controls"><button data-action="dec">-</button><input class="val" readonly value="0"><button data-action="inc">+</button></div></div>
        <div class="attr" data-attr="AGI"><h5>AGI — Velocidade e Precisão</h5><div class="controls"><button data-action="dec">-</button><input class="val" readonly value="0"><button data-action="inc">+</button></div></div>
        <div class="attr" data-attr="VIG"><h5>VIG — Resistência Física</h5><div class="controls"><button data-action="dec">-</button><input class="val" readonly value="0"><button data-action="inc">+</button></div></div>

        <div class="attr" data-attr="INT"><h5>INT — Conhecimento e Lógica</h5><div class="controls"><button data-action="dec">-</button><input class="val" readonly value="0"><button data-action="inc">+</button></div></div>
        <div class="attr" data-attr="AUR"><h5>AUR — Energia Espiritual</h5><div class="controls"><button data-action="dec">-</button><input class="val" readonly value="0"><button data-action="inc">+</button></div></div>
        <div class="attr" data-attr="CAR"><h5>CAR — Influência Social</h5><div class="controls"><button data-action="dec">-</button><input class="val" readonly value="0"><button data-action="inc">+</button></div></div>
      </div>

      <div class="skill-row">
        <div class="skill-box"><label>Perícias</label><textarea id="skills" placeholder="Liste perícias (uma por linha)"></textarea></div>
        <div class="skill-box"><label>Habilidades</label><textarea id="abilities" placeholder="Liste habilidades (uma por linha)"></textarea></div>
      </div>

      <div class="conditions"><div class="subtitle">Condições e Características</div><textarea id="notes" placeholder="Condições, características e notas importantes"></textarea></div>
    </main>

    <!-- DIREITA: inventory -->
    <aside class="inventory">
      <h4 style="margin:0 0 8px 0;font-family:'Cinzel Decorative',serif;font-size:16px">Inventário</h4>

      <div class="inv-add">
        <input id="invName" placeholder="Nome do item" />
        <input id="invQty" type="number" placeholder="Qtd" min="1" />
        <input id="invSpace" placeholder="Espaço/Tipo" />
        <button type="button" id="invAddBtn">+ adicionar</button>
      </div>

      <ul class="inv-list" id="invList"></ul>
    </aside>
  </div>
    <script src="JS.js"></script>
</body>
</html>
